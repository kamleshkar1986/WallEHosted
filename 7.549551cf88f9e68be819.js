(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{fiVA:function(t,e,i){"use strict";i.r(e),i.d(e,"CollectionModule",(function(){return d}));var r=i("ofXK"),o=i("PCNd"),l=i("tyNb"),n=i("fXoL"),s=i("vElQ"),a=i("jhN1"),m=i("ve3S");const c=[{path:":coll-path",component:(()=>{class t{constructor(t,e,i){this.htmlProvider=t,this.route=e,this.sanitizer=i,this.thumbImgArr=[]}ngOnInit(){this.route.paramMap.subscribe(t=>{this.htmlProvider.getWebPageHTML(t.get("coll-path").split("#").join("/")+"?high=5").subscribe()}),this.htmlProvideSubs=this.htmlProvider.siteHtmlSubject.subscribe(t=>{if(1==t){this.htmlProvider.getCollectionFirstImgURL();const t=this.getFirstIngSeqNo(this.htmlProvider.firstCollectionImgURL),i=this.getCollectionNameFromURL(this.htmlProvider.firstCollectionImgURL);for(var e=t;e>=0;e--){const r=this.htmlProvider.firstCollectionImgURL.split("-"+t.toString()).join("-"+e.toString()).replace("full5","medium1").replace("media1","media"),o={};o.img_url=r,o.img_title=e+1+" "+i,o.download_url=o.img_url.replace("medium1","full5").replace("media","media1"),this.thumbImgArr.push(o)}}})}getCollectionNameFromURL(t){return decodeURI(t.split("/")[5])}getFirstIngSeqNo(t){var e=t.split("\\").pop().split("/").pop().match(/(\d+)/);return parseInt(e[0])}downloadWallPapers(){for(var t=0;t<this.thumbImgArr.length;t++)t%11==0&&t>0&&this.wait(3e3),this.downloadImg(this.thumbImgArr[t])}downloadImg(t){let e=t.download_url.replace("https://media1.santabanta.com","/media.santabanta"),i=5;for(;i>=1;){if(this.imageExists(e)){let t=document.createElement("a");document.body.appendChild(t),t.setAttribute("style","display: none"),t.href=e,t.download=e.split("\\").pop().split("/").pop(),t.click(),URL.revokeObjectURL(e.toString()),t.remove();break}e=e.replace("/full"+i+"/","/full"+(i-1)+"/"),i--}}imageExists(t){t=t.replace("https://media.santabanta.com","/thumb.santabanta");var e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(),404!=e.status}wait(t){for(var e=(new Date).getTime(),i=e;i<e+t;)i=(new Date).getTime()}ngOnDestroy(){this.htmlProvideSubs.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(n.Db(s.a),n.Db(l.a),n.Db(a.b))},t.\u0275cmp=n.xb({type:t,selectors:[["app-collection"]],decls:1,vars:3,consts:[[3,"thumbImgArr","title","gridActionName","thumbImgClick","gridActionClick"]],template:function(t,e){1&t&&(n.Gb(0,"app-image-grid",0),n.Mb("thumbImgClick",(function(t){return e.downloadImg(t)}))("gridActionClick",(function(){return e.downloadWallPapers()})),n.Fb()),2&t&&n.Pb("thumbImgArr",e.thumbImgArr)("title",null==e.thumbImgArr[0]?null:e.thumbImgArr[0].img_title)("gridActionName","Download All")},directives:[m.a],styles:[""]}),t})()}];let u=(()=>{class t{}return t.\u0275mod=n.Bb({type:t}),t.\u0275inj=n.Ab({factory:function(e){return new(e||t)},imports:[[l.d.forChild(c)],l.d]}),t})(),d=(()=>{class t{}return t.\u0275mod=n.Bb({type:t}),t.\u0275inj=n.Ab({factory:function(e){return new(e||t)},imports:[[r.b,u,o.a]]}),t})()}}]);